function getTags(){var e=["common","viewer"],t=rendererModel.runningExperiments;for(var i in t)e.push(i.toLowerCase()+":"+t[i].toLowerCase());return e}define.resource("tags",getTags()),define.resource("mode",{debug:"debug"===debugMode,test:!1}),define.deployment("wysiwyg.deployment.PrepViewer",function(e){e.atPhase(PHASES.BOOTSTRAP,function(){window.wixData&&resource.getResources(["dataFixer"],function(e){var t=e.dataFixer.fix(window.wixData);this.define.dataItem.multi(t.document_data),this.define.dataPropertyItem.multi(t.component_properties),this.define.dataThemeItem.multi(t.theme_data)})}),e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.SiteMembers","wysiwyg.viewer.managers.SiteMembersManager"),e.createClassInstance("W.MessagesController","wysiwyg.viewer.utils.MessageViewController")}),e.atPhase(PHASES.POST_DEPLOY,function(e){if("preview"===window.viewMode)return null;if(window.siteHeader&&window.rendererModel){var t=e.getClassManagerInstance();t.getClass("core.utils.BeatStatisticsAndKeepAlive",function(e){window.BeatStatisticsAndKeepAliveInstance=new e("hve",siteHeader.id,$$("title")[0].innerHTML,siteHeader.documentType,!1,rendererModel.metaSiteId,function(){})})}})}),resource.getResources(["mode","scriptLoader"],function(e){window.getIndexTopology.call(e,{debug:e.mode.debug},{aliases:{web:"wysiwyg"},exclude:{langs:!0,mock:!0,sitemembers:!0,ecommerce:!0},baseUrls:{external_apis:""}},function(t){define.resource("topology",t.all),e.mode.test&&t.manifestsUrls.unshift(getTestManifestFromTheSpecRunner()),define.resource("manifestsUrls",t.manifestsUrls),define.deployment("wysiwyg.deployment.Wysiwyg-Common",function(e){e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.Layout","wysiwyg.common.managers.LayoutManager"),e.createClassInstance("W.CookiesManager","wysiwyg.managers.WCookiesManager"),e.createClassInstance("W.Viewer","wysiwyg.common.managers.WViewManager"),e.createClassInstance("W.TPA","wysiwyg.viewer.managers.TPAManager")})}),e.scriptLoader.loadAllIndexes(t.manifestsUrls,function(){define.resource("deployment",define.createBootstrapClassInstance("bootstrap.bootstrap.deploy.Deploy").init(window))})})}),define.deployment("core.deployment.DeployViewer",function(e){e.atPhase(PHASES.INIT,function(){function e(){W.Pages.isPageLoadingCompleted()?W.Data.getDataByQuery("#SITE_STRUCTURE",function(e){var t="preview"!=window.viewMode;W.Viewer.setSite($("SITE_STRUCTURE"),e,t)}):W.Utils.callLater(e,[],this,10)}W.Experiments.isDeployed({NoAnchorsFromServer:"New"})||null==window.anchors||W.Layout.setSavedAnchor(window.anchors),W.ComponentLifecycle.setComponentErrorHandler(function(e,t,i){"use strict";var n=e.component.$className;LOG.reportError(wixErrors.COMPONENT_ERROR,n,i,t.stack)}),resource.getResourceValue("status.structure.loaded",function(t){if(!t)throw Error("Site structure failed to load");W.Pages&&W.Pages.loadSite&&!window.wixData?(W.Pages.loadSite(),e()):W.Data.getDataByQuery("#SITE_STRUCTURE",function(e){var t="preview"!=window.viewMode;W.Viewer.setSite($("SITE_STRUCTURE"),e,t)})})}),e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.Pages","wysiwyg.viewer.managers.PageManager")})});